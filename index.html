<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>File Sharing Platform</title>
</head>
<body style="font-family: sans-serif; padding: 2em;">
  <h2>ğŸ“¤ Ø±ÙØ¹ Ù…Ù„Ù</h2>
  <input type="file" id="fileInput" />
  <button onclick="uploadFile()">Ø±ÙØ¹</button>
  <p id="uploadStatus"></p>

  <hr>

  <h2>ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ù…Ù„Ù</h2>
  <input type="text" id="fileNameDownload" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù Ù…Ø¹ Ø§Ù„Ø§Ù…ØªØ¯Ø§Ø¯ (Ù…Ø«Ø§Ù„: test.txt)" />
  <button onclick="downloadFile()">ØªØ­Ù…ÙŠÙ„</button>
  <p id="downloadStatus"></p>

  <script>
    const apiUrl = 'https://6sl62euv5c.execute-api.us-east-1.amazonaws.com/dev/files';

    async function uploadFile() {
      const fileInput = document.getElementById('fileInput');
      const status = document.getElementById('uploadStatus');
      if (!fileInput.files.length) {
        status.textContent = 'â— Ø§Ø®ØªØ± Ù…Ù„ÙÙ‹Ø§ Ø£ÙˆÙ„Ø§Ù‹.';
        return;
      }

      const file = fileInput.files[0];
      const response = await fetch(`${apiUrl}?fileName=${file.name}`, {
        method: 'POST',
        headers: {
          'Content-Type': file.type || 'text/plain',
        },
        body: file,
      });

      const result = await response.text();
      status.textContent = response.ok ? 'âœ… ØªÙ… Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù!' : `âŒ Ø®Ø·Ø£: ${result}`;
    }

    function downloadFile() {
      const fileName = document.getElementById('fileNameDownload').value;
      const status = document.getElementById('downloadStatus');

      if (!fileName) {
        status.textContent = 'â— Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù Ø£ÙˆÙ„Ø§Ù‹.';
        return;
      }

      const link = document.createElement('a');
      link.href = `${apiUrl}?fileName=${encodeURIComponent(fileName)}`;
      link.download = fileName;
      link.click();

      status.textContent = 'â¬‡ï¸ Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù...';
    }
  </script>
</body>
</html>
